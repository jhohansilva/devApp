<!-- <template id="login.html"> -->
<ons-page>
    <main id="login">
        <header>
            <div id="logo">
                <img src="./img/logo_blanco.png" />
            </div>
        </header>
        <div class="content">
            <form id="logeo">
                <div class="form">
                    <div class="title">Inicio de sesión</div>
                    <ons-input autocomplete="off" autocorrect="off" autocapitalize="off" id="username" type="text"
                        modifier="underbar" placeholder="Correo electrónico" name="correo" float></ons-input>
                    <ons-input autocomplete="off" autocorrect="off" autocapitalize="off" id="pass" type="password"
                        modifier="underbar" placeholder="Contraseña" name="clave" float></ons-input>
                    <ons-icon class="togglePass" icon="ion-eye-disabled" size="27px"></ons-icon>
                    <ons-list-item style="padding: 0;">
                        <div class="center labelSwitch">
                            Recordar cuenta
                        </div>
                        <div class="left">
                            <ons-switch></ons-switch>
                        </div>
                    </ons-list-item>
                    <ons-button id="enviar" modifier="large">Ingresar</ons-button>
                    <div class="recoverPass"><a href="#">Recuperar contraseña</a></div>
                </div>
            </form>
        </div>
    </main>
    <script>
        ons.getScriptPage().onInit = function () {
            $("#enviar").click(login);
            $('.togglePass').click(function () {
                if ($(this).attr('icon') == 'ion-eye-disabled') {
                    $(this)
                        .attr('icon', 'ion-eye')
                        .attr('style', 'color:#012362;font-size:25px;');
                    $('#pass').attr('type', 'text');
                } else {
                    $(this)
                        .attr('icon', 'ion-eye-disabled')
                        .attr('style', 'font-size:25px;');
                    $('#pass').attr('type', 'password');
                }
            });
        };

        function login(e) {
            var username = $('#username').val().toLowerCase();
            var pass = $('#pass').val();

            if (username.length < 1) sendToast('Ingresa un correo electrónico');
            else if (pass.length < 1) sendToast('Ingresa una contraseña');
            else {
                // location.reload();
                console.log();
                send_data({
                    data: $('#logeo').serialize(),
                    dataType: 'json',
                    method: 'logeo',
                    url: "http://192.168.42.146/titanapp/inc/clients.php",
                    // url: "http://192.168.0.64/devapp/inc/clients.php",
                    callback: function (data) {
                        if (data.codigo == '0') {
                            console.log(data.detalle);
                            ons.notification.alert(data.detalle);
                        } else {
                            sendToast(data.detalle);
                        }
                    }
                })
            }
        }

        function sendToast(msg) {
            ons.notification.toast(msg, { timeout: 1500, animation: 'ascend' })
        }
    </script>
</ons-page>
<!-- </template> -->